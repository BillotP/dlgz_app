{"version":3,"file":"6.164a7a05.js","sources":["../../../../../../src/routes/delegator/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { onMount } from \"svelte\";\n  import { PUBLIC_API_HOST } from \"$env/static/public\";\n  import type { DelegatorStatItems, DelegatorsItems } from \"$lib/delegators\";\n\n  const startYear = 2018;\n  const yearArray = Array.from(\n    { length: new Date().getFullYear() - startYear + 1 },\n    (_, i) => startYear + i\n  );\n  let params = {\n    page: 0,\n    limit: 10,\n    year: \"\",\n  };\n  let loading = false;\n  let res: DelegatorsItems = { data: [] };\n  let stats: DelegatorStatItems = { data: [] };\n\n  async function doGetDelegators() {\n    loading = true;\n    try {\n      let bdy = await fetch(\n        `${PUBLIC_API_HOST}/xtz/delegators?page=${params.page}&limit=${params.limit}&year=${params.year}`\n      );\n      res = await bdy.json();\n      loading = false;\n    } catch (err) {\n      console.error(err);\n      loading = false;\n    }\n  }\n  onMount(() => doGetDelegators());\n</script>\n\n<div class=\"colums is-mobile\">\n  <div class=\"column\">\n    <div class=\"card p-2\">\n      <div class=\"table-container\" style=\"height: 35vh;overflow-y:scroll\">\n        <table\n          class=\"table is-bordered is-striped is-narrow is-hoverable is-fullwidth\"\n        >\n          <!-- Your table content -->\n          <thead style=\"width:100%;\">\n            <tr>\n              <th><abbr title=\"Delegator Address\">Address</abbr></th>\n              <th><abbr title=\"First Seen\">First Seen</abbr></th>\n            </tr>\n          </thead>\n          <tbody style=\"height: 100%;\">\n            {#each res.data as r}\n              <tr>\n                <th>{r.address}</th>\n                <td>{r.first_seen}</td>\n              </tr>\n            {/each}\n          </tbody>\n        </table>\n      </div>\n      <nav class=\"pagination is-centered\" aria-label=\"pagination\">\n        <button\n          class=\"pagination-previous\"\n          disabled={params.page == 0 || loading}\n          on:click={() => {\n            if (params.page == 0) return;\n            params.page = params.page - 1;\n            doGetDelegators();\n          }}>Previous</button\n        >\n        <button\n          class=\"pagination-next\"\n          disabled={loading}\n          on:click={() => {\n            params.page = params.page + 1;\n            doGetDelegators();\n          }}>Next page</button\n        >\n      </nav>\n    </div>\n  </div>\n  <div class=\"column\">\n    <div class=\"card p-2\">\n      <div class=\"field\">\n        <label for=\"limit\" class=\"label\">Limit</label>\n        <div class=\"control has-icons-left has-icons-right\">\n          <input\n            id=\"limit\"\n            class=\"input\"\n            type=\"number\"\n            step=\"1\"\n            min=\"1\"\n            max=\"100\"\n            on:change={() => {\n              if (params.limit > 100) {\n                params.limit = 100;\n              }\n            }}\n            bind:value={params.limit}\n            placeholder=\"Max results per page\"\n          />\n          <span class=\"icon is-small is-left\">\n            <i class=\"fas fa-file\" />\n          </span>\n          <span\n            class=\"icon is-small is-right\"\n            class:is-danger={params.limit > 100}\n          >\n            <i class=\"fas fa-check\" />\n          </span>\n        </div>\n        {#if params.limit > 100}\n          <p class=\"help is-danger\">Max limit is 100</p>\n        {/if}\n      </div>\n\n      <div class=\"field\">\n        <label for=\"page\" class=\"label\">Page</label>\n        <div class=\"control has-icons-left has-icons-right\">\n          <input\n            id=\"page\"\n            bind:value={params.page}\n            class=\"input is-success\"\n            type=\"number\"\n            placeholder=\"Page setting\"\n            step=\"1\"\n            min=\"0\"\n            on:change={() => {\n              if (params.page < 0) {\n                params.page = 0;\n              }\n            }}\n          />\n          <span class=\"icon is-small is-left\">\n            <i class=\"fas fa-file\" />\n          </span>\n          <span class=\"icon is-small is-right\">\n            <i class=\"fas fa-check\" />\n          </span>\n        </div>\n      </div>\n\n      <div class=\"field\">\n        <label for=\"year\" class=\"label\">Year</label>\n        <div class=\"control is-expanded\">\n          <div class=\"select is-rounded is-fullwidth\">\n            <select\n              id=\"year\"\n              class:is-loading={loading}\n              bind:value={params.year}\n            >\n              <option selected value=\"\">Any</option>\n              {#each yearArray as y}\n                <option value={y}>{y}</option>\n              {/each}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"field is-grouped\">\n        <div class=\"control\">\n          <button\n            class=\"button is-link\"\n            disabled={loading}\n            on:click={() => doGetDelegators}\n            class:is-loading={loading}>Submit</button\n          >\n        </div>\n        <div class=\"control\">\n          <button class=\"button is-link is-light\">Cancel</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"],"names":["t0_value","ctx","t2_value","insert_hydration","target","tr","anchor","append_hydration","th","td","dirty","set_data","t0","t2","p","option","each_value_1","ensure_array_like","i","create_if_block","button0","button0_disabled_value","add_render_callback","select","div15","div2","div1","div0","table","thead","tbody","nav","button1","div14","div13","div4","label0","div3","input0","set_input_value","span0","span1","div6","label1","div5","input1","span2","span3","div9","label2","div8","div7","select_option","div12","div10","button2","div11","to_number","startYear","yearArray","_","params","loading","res","doGetDelegators","bdy","PUBLIC_API_HOST","$$invalidate","err","onMount","select_value"],"mappings":"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"}