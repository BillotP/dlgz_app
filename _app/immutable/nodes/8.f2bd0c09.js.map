{"version":3,"file":"8.f2bd0c09.js","sources":["../../../../../../src/routes/delegator/stats/[address]/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { page } from \"$app/stores\";\n  import { PUBLIC_API_HOST } from \"$env/static/public\";\n  import {\n    StatKinds,\n    type DelegatorStatItems,\n    type StatValue,\n  } from \"$lib/delegators\";\n  import { onMount } from \"svelte\";\n\n  let res: StatValue | undefined;\n  let year = 2018;\n  let loading = false;\n  const startYear = 2018;\n  const yearArray = Array.from(\n    { length: new Date().getFullYear() - startYear + 1 },\n    (_, i) => startYear + i\n  );\n  let kind = StatKinds.YEARLYVOLUME;\n  async function getDelegatorStats() {\n    loading = true;\n    try {\n      let bdy = await fetch(\n        `${PUBLIC_API_HOST}/xtz/delegators/stats?year=${year}&kind=${kind}&delegator=${$page.params[\"address\"]}`\n      );\n      if (bdy.status == 201) {\n        // return getDelegatorStats();\n        loading = false;\n        return;\n      }\n      let chk = (await bdy.json()) as DelegatorStatItems;\n      res = chk.data[0].value[0];\n      loading = false;\n    } catch (err) {\n      console.error(err);\n      loading = false;\n    }\n  }\n  $: res;\n  onMount(() => {\n    getDelegatorStats();\n  });\n</script>\n\n<div class=\"column\">\n  <div class=\"field has-addons\">\n    <div class=\"control is-expanded\">\n      <div class=\"select is-fullwidth\">\n        <select\n          disabled={loading}\n          class:is-loading={loading}\n          bind:value={kind}\n          on:change={() => getDelegatorStats()}\n        >\n          {#each Object.values(StatKinds).filter((a) => !a.startsWith(\"TOP\")) as y, i}\n            <option value={y}>{y}</option>\n          {/each}\n        </select>\n      </div>\n    </div>\n  </div>\n  <div class=\"field has-addons\">\n    <div class=\"control is-expanded\">\n      <div class=\"select is-fullwidth\">\n        <select\n          disabled={loading}\n          class:is-loading={loading}\n          bind:value={year}\n          on:change={() => getDelegatorStats()}\n        >\n          {#each yearArray as y}\n            <option value={y}>{y}</option>\n          {/each}\n        </select>\n      </div>\n    </div>\n  </div>\n</div>\n{#if res && res.value}\n  <div class=\"card\">\n    <div class=\"card-title\">\n      <h2 class=\"title\">\n        {(Number(res.value) / 10e5 ).toLocaleString()} XTZ\n        <a target=\"_blank\" href={`https://tzstats.com/${res.delegator}`}>ðŸ”Ž</a>\n      </h2>\n    </div>\n  </div>\n{/if}\n<!-- <div class=\"columns is-multiline m-2\" style=\"height:60vh;overflow-y:auto;\">\n  <div class=\"column is-one-quarter\">\n  </div>\n</div> -->\n"],"names":["ctx","insert_hydration","target","option","anchor","t0_value","attr","a","a_href_value","div1","append_hydration","div0","h2","dirty","set_data","t0","each_value_1","ensure_array_like","StatKinds","func","i","create_if_block","add_render_callback","select0","select1","div6","div2","div5","div4","div3","startYear","res","year","loading","yearArray","_","kind","getDelegatorStats","bdy","PUBLIC_API_HOST","$page","chk","$$invalidate","err","onMount","select_value"],"mappings":"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"}