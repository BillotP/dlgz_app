{"version":3,"file":"4.cf430769.js","sources":["../../../../../../src/routes/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { onMount } from \"svelte\";\n  import { PUBLIC_API_HOST } from \"$env/static/public\";\n  import type { DelegationItems } from \"../lib/delegation\";\n  import { base } from \"$app/paths\";\n\n  const startYear = 2018;\n  const yearArray = Array.from(\n    { length: new Date().getFullYear() - startYear + 1 },\n    (_, i) => startYear + i\n  );\n  let params = {\n    page: 0,\n    limit: 10,\n    year: \"\",\n  };\n  let loading = false;\n  let res: DelegationItems = { data: [] };\n  async function doGetDelegations() {\n    loading = true;\n    try {\n      let bdy = await fetch(\n        `${PUBLIC_API_HOST}/xtz/delegations?page=${params.page}&limit=${params.limit}&year=${params.year}`\n      );\n      res = await bdy.json();\n      loading = false;\n    } catch (err) {\n      console.error(err);\n      loading = false;\n    }\n  }\n  onMount(() => doGetDelegations());\n</script>\n\n<div class=\"hero is-fullheight-with-navbar\">\n  <div class=\"hero is-small is-primary\">\n    <div class=\"hero-body\">\n      <span>\n        <h1 class=\"title\">Tezos Delegation Events</h1>\n        <p class=\"subtitle\">Ordered by most recent first</p>\n      </span>\n    </div>\n  </div>\n  <div class=\"colums is-mobile\">\n    <div class=\"column\">\n      <div class=\"card p-2\">\n        <div class=\"table-container\" style=\"height: 35vh;overflow-y:scroll\">\n          <table\n            class=\"table is-bordered is-striped is-narrow is-hoverable is-fullwidth\"\n          >\n            <!-- Your table content -->\n            <thead style=\"width:100%;\">\n              <tr>\n                <th><abbr title=\"Timestamp\">Ts</abbr></th>\n                <th><abbr title=\"Amount in XTZ\">XTZ Amount</abbr></th>\n                <th><abbr title=\"Delegator Address\">Delegator</abbr></th>\n                <th><abbr title=\"Block Height\">Block</abbr></th>\n              </tr>\n            </thead>\n            <tbody style=\"height: 100%;\">\n              {#each res.data as r}\n                <tr>\n                  <th>{r.timestamp}</th>\n                  <td>\n                    {(Number(r.amount) / 10e5).toLocaleString()}\n                  </td>\n                  <td\n                    ><p>\n                      {`` + (r.delegator.length > 0 ? r.delegator : \"ðŸ‘» ðŸ¥–\")}\n                    </p>\n                    {#if r.delegator.length > 0}\n                      <a\n                        target=\"_blank\"\n                        href={`https://tzstats.com/${r.delegator}`}>ðŸ”Ž</a\n                      >\n                    {/if}\n                  </td>\n                  <td\n                    >{r.block}\n                    <a target=\"_blank\" href={`https://tzstats.com/${r.block}`}\n                      >ðŸ”Ž</a\n                    >\n                  </td>\n                </tr>\n              {/each}\n            </tbody>\n          </table>\n        </div>\n        <nav class=\"pagination is-centered\" aria-label=\"pagination\">\n          <button\n            class=\"pagination-previous\"\n            disabled={params.page == 0 || loading}\n            on:click={() => {\n              if (params.page == 0) return;\n              params.page = params.page - 1;\n              doGetDelegations();\n            }}>Previous</button\n          >\n          <button\n            class=\"pagination-next\"\n            disabled={loading}\n            on:click={() => {\n              params.page = params.page + 1;\n              doGetDelegations();\n            }}>Next page</button\n          >\n        </nav>\n      </div>\n    </div>\n    <div class=\"column\">\n      <div class=\"card p-2\">\n        <div class=\"field\">\n          <label for=\"limit\" class=\"label\">Limit</label>\n          <div class=\"control has-icons-left has-icons-right\">\n            <input\n              id=\"limit\"\n              class=\"input\"\n              type=\"number\"\n              step=\"1\"\n              min=\"1\"\n              max=\"100\"\n              on:change={() => {\n                if (params.limit > 100) {\n                  params.limit = 100;\n                }\n              }}\n              bind:value={params.limit}\n              placeholder=\"Max results per page\"\n            />\n            <span class=\"icon is-small is-left\">\n              <i class=\"fas fa-file\" />\n            </span>\n            <span\n              class=\"icon is-small is-right\"\n              class:is-danger={params.limit > 100}\n            >\n              <i class=\"fas fa-check\" />\n            </span>\n          </div>\n          {#if params.limit > 100}\n            <p class=\"help is-danger\">Max limit is 100</p>\n          {/if}\n        </div>\n\n        <div class=\"field\">\n          <label for=\"page\" class=\"label\">Page</label>\n          <div class=\"control has-icons-left has-icons-right\">\n            <input\n              id=\"page\"\n              bind:value={params.page}\n              class=\"input is-success\"\n              type=\"number\"\n              placeholder=\"Page setting\"\n              step=\"1\"\n              min=\"0\"\n              on:change={() => {\n                if (params.page < 0) {\n                  params.page = 0;\n                }\n              }}\n            />\n            <span class=\"icon is-small is-left\">\n              <i class=\"fas fa-file\" />\n            </span>\n            <span class=\"icon is-small is-right\">\n              <i class=\"fas fa-check\" />\n            </span>\n          </div>\n        </div>\n\n        <div class=\"field\">\n          <label for=\"year\" class=\"label\">Year</label>\n          <div class=\"control is-expanded\">\n            <div class=\"select is-rounded is-fullwidth\">\n              <select id=\"year\" bind:value={params.year}>\n                <option selected value=\"\">Any</option>\n                {#each yearArray as y}\n                  <option value={y}>{y}</option>\n                {/each}\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"field is-grouped\">\n          <div class=\"control\">\n            <button\n              class=\"button is-link\"\n              disabled={loading}\n              on:click={doGetDelegations}\n              class:is-loading={loading}>Submit</button\n            >\n          </div>\n          <div class=\"control\">\n            <button class=\"button is-link is-light\">Cancel</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"],"names":["attr","a","a_href_value","ctx","insert_hydration","target","anchor","dirty","t0_value","t2_value","t4_value","t7_value","if_block","create_if_block_1","tr","append_hydration","th","td0","td1","p","td2","set_data","t0","t2","t4","t7","option","each_value_1","ensure_array_like","i","create_if_block","button0","button0_disabled_value","add_render_callback","select","div18","div1","div17","div4","div3","div2","table","thead","tbody","nav","button1","div16","div15","div6","label0","div5","input0","set_input_value","span1","span2","div8","label1","div7","input1","span3","span4","div11","label2","div10","div9","select_option","div14","div12","button2","div13","to_number","startYear","yearArray","_","params","loading","res","doGetDelegations","bdy","PUBLIC_API_HOST","$$invalidate","err","onMount","select_value"],"mappings":"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"}