{"version":3,"file":"2.c5cc8c29.js","sources":["../../../../../../node_modules/.pnpm/svelte@4.0.1/node_modules/svelte/src/runtime/internal/each.js","../../../../../../src/routes/+page.svelte"],"sourcesContent":["import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","<script lang=\"ts\">\n  import { onMount } from \"svelte\";\n  import { PUBLIC_API_HOST } from \"$env/static/public\";\n  import type { DelegationItems } from \"../lib/delegation\";\n\n  const startYear = 2018;\n  const yearArray = Array.from(\n    { length: new Date().getFullYear() - startYear + 1 },\n    (_, i) => startYear + i\n  );\n  let params = {\n    page: 0,\n    limit: 10,\n    year: \"\",\n  };\n  let loading = false;\n  let res: DelegationItems = { data: [] };\n  async function doGetDelegations() {\n    loading = true;\n    try {\n      let host = PUBLIC_API_HOST;\n      let bdy = await fetch(\n        `${host}/xtz/delegations?page=${params.page}&limit=${params.limit}&year=${params.year}`\n      );\n      res = await bdy.json();\n      loading = false;\n    } catch (err) {\n      console.error(err);\n      loading = false;\n    }\n  }\n  onMount(() => doGetDelegations());\n</script>\n\n<div class=\"hero is-fullheight-with-navbar\">\n  <div class=\"hero is-small is-primary\">\n    <div class=\"hero-body\">\n      <span>\n        <h1 class=\"title\">Tezos Delegation Events</h1>\n        <p class=\"subtitle\">Ordered by most recent first</p>\n      </span>\n    </div>\n  </div>\n  <div class=\"colums is-mobile\">\n    <div class=\"column\">\n      <div class=\"card p-2\">\n        <div class=\"table-container\" style=\"height: 35vh;overflow-y:scroll\">\n          <table\n            class=\"table is-bordered is-striped is-narrow is-hoverable is-fullwidth\"\n          >\n            <!-- Your table content -->\n            <thead style=\"width:100%;\">\n              <tr>\n                <th><abbr title=\"Timestamp\">Ts</abbr></th>\n                <th><abbr title=\"Amount in XTZ\">XTZ Amount</abbr></th>\n                <th><abbr title=\"Delegator Address\">Delegator</abbr></th>\n                <th><abbr title=\"Block Height\">Block</abbr></th>\n              </tr>\n            </thead>\n            <tbody style=\"height: 100%;\">\n              {#each res.data as r}\n                <tr>\n                  <th>{r.timestamp}</th>\n                  <td>\n                    {Number(r.amount).toLocaleString()}\n                  </td>\n                  <td\n                    >{r.delegator.length > 0 ? r.delegator : \"ðŸ‘» ðŸ¥–\"}\n                    {#if r.delegator.length > 0}\n                      <a\n                        target=\"_blank\"\n                        href={`https://tzstats.com/${r.delegator}`}>ðŸ”Ž</a\n                      >\n                    {/if}\n                  </td>\n                  <td\n                    >{r.block}\n                    <a target=\"_blank\" href={`https://tzstats.com/${r.block}`}\n                      >ðŸ”Ž</a\n                    >\n                  </td>\n                </tr>\n              {/each}\n            </tbody>\n          </table>\n        </div>\n        <nav class=\"pagination is-centered\" aria-label=\"pagination\">\n          <button\n            class=\"pagination-previous\"\n            disabled={params.page == 0 || loading}\n            on:click={() => {\n              if (params.page == 0) return;\n              params.page = params.page - 1;\n              doGetDelegations();\n            }}>Previous</button\n          >\n          <button\n            class=\"pagination-next\"\n            disabled={loading}\n            on:click={() => {\n              params.page = params.page + 1;\n              doGetDelegations();\n            }}>Next page</button\n          >\n        </nav>\n      </div>\n    </div>\n    <div class=\"column\">\n      <div class=\"card p-2\">\n        <div class=\"field\">\n          <label for=\"limit\" class=\"label\">Limit</label>\n          <div class=\"control has-icons-left has-icons-right\">\n            <input\n              id=\"limit\"\n              class=\"input\"\n              type=\"number\"\n              step=\"1\"\n              min=\"1\"\n              max=\"100\"\n              on:change={() => {\n                if (params.limit > 100) {\n                  params.limit = 100;\n                }\n              }}\n              bind:value={params.limit}\n              placeholder=\"Max results per page\"\n            />\n            <span class=\"icon is-small is-left\">\n              <i class=\"fas fa-file\" />\n            </span>\n            <span\n              class=\"icon is-small is-right\"\n              class:is-danger={params.limit > 100}\n            >\n              <i class=\"fas fa-check\" />\n            </span>\n          </div>\n          {#if params.limit > 100}\n            <p class=\"help is-danger\">Max limit is 100</p>\n          {/if}\n        </div>\n\n        <div class=\"field\">\n          <label for=\"page\" class=\"label\">Page</label>\n          <div class=\"control has-icons-left has-icons-right\">\n            <input\n              id=\"page\"\n              bind:value={params.page}\n              class=\"input is-success\"\n              type=\"number\"\n              placeholder=\"Page setting\"\n              step=\"1\"\n              min=\"0\"\n              on:change={() => {\n                if (params.page < 0) {\n                  params.page = 0;\n                }\n              }}\n            />\n            <span class=\"icon is-small is-left\">\n              <i class=\"fas fa-file\" />\n            </span>\n            <span class=\"icon is-small is-right\">\n              <i class=\"fas fa-check\" />\n            </span>\n          </div>\n        </div>\n\n        <div class=\"field\">\n          <label for=\"year\" class=\"label\">Year</label>\n          <div class=\"control is-expanded\">\n            <div class=\"select is-rounded is-fullwidth\">\n              <select id=\"year\" bind:value={params.year}>\n                <option selected value=\"\">Any</option>\n                {#each yearArray as y}\n                  <option value={y}>{y}</option>\n                {/each}\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"field is-grouped\">\n          <div class=\"control\">\n            <button\n              class=\"button is-link\"\n              disabled={loading}\n              on:click={doGetDelegations}\n              class:is-loading={loading}>Submit</button\n            >\n          </div>\n          <div class=\"control\">\n            <button class=\"button is-link is-light\">Cancel</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"],"names":["ensure_array_like","array_like_or_iterator","attr","a","a_href_value","ctx","insert_hydration","target","anchor","dirty","t0_value","t2_value","t4_value","t7_value","if_block","create_if_block_1","tr","append_hydration","th","td0","td1","td2","set_data","t0","t2","t4","t7","p","option","each_value_1","i","create_if_block","button0","button0_disabled_value","add_render_callback","select","div18","div1","div17","div4","div3","div2","table","thead","tbody","nav","button1","div16","div15","div6","label0","div5","input0","set_input_value","span1","span2","div8","label1","div7","input1","span3","span4","div11","label2","div10","div9","select_option","div14","div12","button2","div13","to_number","startYear","yearArray","_","params","loading","res","doGetDelegations","bdy","PUBLIC_API_HOST","$$invalidate","err","onMount","select_value"],"mappings":"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","x_google_ignoreList":[0]}