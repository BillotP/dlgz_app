{"version":3,"file":"7.e33dd681.js","sources":["../../../../../../src/routes/delegator/stats/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { base } from \"$app/paths\";\n  import { PUBLIC_API_HOST } from \"$env/static/public\";\n  import {\n    StatKinds,\n    type DelegatorStatItems,\n    type StatValue,\n  } from \"$lib/delegators\";\n  import { onMount } from \"svelte\";\n\n  let res: StatValue[] = [];\n  let year = 2018;\n  let filter = \"\";\n  let loading = false;\n  const startYear = 2018;\n  const yearArray = Array.from(\n    { length: new Date().getFullYear() - startYear + 1 },\n    (_, i) => startYear + i\n  );\n  let kind = StatKinds.TOP10DELEGATORS;\n  async function getDelegatorStats() {\n    loading = true;\n    try {\n      let bdy = await fetch(\n        `${PUBLIC_API_HOST}/xtz/delegators/stats?year=${year}&kind=${kind}`\n      );\n      if (bdy.status == 201) {\n        return getDelegatorStats();\n      }\n      let chk = (await bdy.json()) as DelegatorStatItems;\n      res = chk.data[0].value;\n      loading = false;\n    } catch (err) {\n      console.error(err);\n      loading = false;\n    }\n  }\n  onMount(() => {\n    getDelegatorStats();\n  });\n  // function updateFilter() {\n    \n  // }\n  // $: filter && () => {\n  //   res.filter((a) => a.delegator.startsWith(filter)),\n  //   res = res\n  // }\n</script>\n\n<div class=\"column\">\n  <div class=\"field has-addons\">\n    <div class=\"control is-expanded\">\n      <div class=\"select is-fullwidth\">\n        <select\n          disabled={loading}\n          class:is-loading={loading}\n          bind:value={kind}\n          on:change={() => getDelegatorStats()}\n        >\n          {#each Object.keys(StatKinds).filter( (a) => a.startsWith(\"TOP\") ) as y, i}\n            <option value={Object.values(StatKinds)[i]}>{y}</option>\n          {/each}\n        </select>\n      </div>\n    </div>\n  </div>\n  <div class=\"field has-addons\">\n    <div class=\"control is-expanded\">\n      <div class=\"select is-fullwidth\">\n        <select\n          disabled={loading}\n          class:is-loading={loading}\n          bind:value={year}\n          on:change={() => getDelegatorStats()}\n        >\n          {#each yearArray as y}\n            <option value={y}>{y}</option>\n          {/each}\n        </select>\n      </div>\n    </div>\n  </div>\n  <div class=\"field\">\n    <div class=\"control\">\n      <label class=\"radio\">\n        <input\n          bind:group={filter}\n          value=\"\"\n          type=\"radio\"\n          on:toggle={() => {\n            getDelegatorStats().finally(() => {\n              res.filter((a) => a.delegator.startsWith(filter));\n              res = res;\n            });\n          }}\n        />\n        All\n      </label>\n      <label class=\"radio\">\n        <input\n          type=\"radio\"\n          on:toggle={() => {\n            getDelegatorStats().finally(() => {\n              res.filter((a) => a.delegator.startsWith(filter));\n              res = res;\n            });\n          }}\n          bind:group={filter}\n          value=\"KT\"\n        />\n        Contracts\n      </label>\n      <label class=\"radio\">\n        <input\n          type=\"radio\"\n          on:toggle={() => {\n            getDelegatorStats().finally(() => {\n              res.filter((a) => a.delegator.startsWith(filter));\n              res = res;\n              console.log(res);\n            });\n          }}\n          bind:group={filter}\n          value=\"tz\"\n        />\n        User Address\n      </label>\n    </div>\n  </div>\n</div>\n<div class=\"columns is-multiline m-2\" style=\"height:60vh;overflow-y:auto;\">\n  {#each res as r, i}\n    <div class=\"column is-one-quarter\">\n      <div class=\"card\">\n        <div class=\"card-title\">\n          <h2 class=\"title\">\n            {i + 1} :\n            <a href={`${base}/delegator/stats/${r.delegator}`}\n              >{r.delegator}\n            </a>\n            <a target=\"_blank\" href={`https://tzstats.com/${r.delegator}`}>ðŸ”Ž</a\n            >\n          </h2>\n          <p class=\"subtitle\">\n            {(Number(r.value) / 10e5).toLocaleString()} XTZ\n          </p>\n        </div>\n      </div>\n    </div>\n  {/each}\n</div>\n"],"names":["ctx","option","StatKinds","insert_hydration","target","anchor","t0_value","t2_value","t6_value","base","attr","a1","a1_href_value","div2","append_hydration","div1","div0","h2","a0","p","dirty","set_data","t2","t6","each_value_2","ensure_array_like","func","i","add_render_callback","select0","select1","div8","div5","div4","div3","div7","div6","label0","input0","label1","input1","label2","input2","div9","startYear","a","res","year","filter","loading","yearArray","_","kind","getDelegatorStats","bdy","PUBLIC_API_HOST","chk","err","onMount","select_value"],"mappings":"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"}