{"version":3,"file":"4.a1f434af.js","sources":["../../../../../../src/routes/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { onMount } from \"svelte\";\n  import { PUBLIC_API_HOST } from \"$env/static/public\";\n  import type { DelegationItems } from \"../lib/delegation\";\n  import { base } from \"$app/paths\";\n\n  const startYear = 2018;\n  const yearArray = Array.from(\n    { length: new Date().getFullYear() - startYear + 1 },\n    (_, i) => startYear + i\n  );\n  let params = {\n    page: 0,\n    limit: 10,\n    year: \"\",\n  };\n  let loading = false;\n  let res: DelegationItems = { data: [] };\n  async function doGetDelegations() {\n    loading = true;\n    try {\n      let bdy = await fetch(\n        `${PUBLIC_API_HOST}/xtz/delegations?page=${params.page}&limit=${params.limit}&year=${params.year}`\n      );\n      res = await bdy.json();\n      loading = false;\n    } catch (err) {\n      console.error(err);\n      loading = false;\n    }\n  }\n  onMount(() => doGetDelegations());\n</script>\n\n<div class=\"hero is-fullheight-with-navbar\">\n  <div class=\"hero is-small is-primary\">\n    <div class=\"hero-body\">\n      <span>\n        <h1 class=\"title\">Tezos Delegation Events</h1>\n        <p class=\"subtitle\">Ordered by most recent first</p>\n      </span>\n    </div>\n  </div>\n  <div class=\"colums is-mobile\">\n    <div class=\"column\">\n      <div class=\"card p-2\">\n        <div class=\"table-container\" style=\"height: 35vh;overflow-y:scroll\">\n          <table\n            class=\"table is-bordered is-striped is-narrow is-hoverable is-fullwidth\"\n          >\n            <!-- Your table content -->\n            <thead style=\"width:100%;\">\n              <tr>\n                <th><abbr title=\"Timestamp\">Ts</abbr></th>\n                <th><abbr title=\"Amount in XTZ\">XTZ Amount</abbr></th>\n                <th><abbr title=\"Delegator Address\">Delegator</abbr></th>\n                <th><abbr title=\"Block Height\">Block</abbr></th>\n              </tr>\n            </thead>\n            <tbody style=\"height: 100%;\">\n              {#each res.data as r}\n                <tr>\n                  <th>{r.timestamp}</th>\n                  <td>\n                    {(Number(r.amount) / 10e5 ).toLocaleString()}\n                  </td>\n                  <td\n                    ><a href={`${base}/delegator/stats/${r.delegator}`}\n                      >{`` +\n                        (r.delegator.length > 0 ? r.delegator : \"ðŸ‘» ðŸ¥–\")}</a\n                    >\n                    {#if r.delegator.length > 0}\n                      <a\n                        target=\"_blank\"\n                        href={`https://tzstats.com/${r.delegator}`}>ðŸ”Ž</a\n                      >\n                    {/if}\n                  </td>\n                  <td\n                    >{r.block}\n                    <a target=\"_blank\" href={`https://tzstats.com/${r.block}`}\n                      >ðŸ”Ž</a\n                    >\n                  </td>\n                </tr>\n              {/each}\n            </tbody>\n          </table>\n        </div>\n        <nav class=\"pagination is-centered\" aria-label=\"pagination\">\n          <button\n            class=\"pagination-previous\"\n            disabled={params.page == 0 || loading}\n            on:click={() => {\n              if (params.page == 0) return;\n              params.page = params.page - 1;\n              doGetDelegations();\n            }}>Previous</button\n          >\n          <button\n            class=\"pagination-next\"\n            disabled={loading}\n            on:click={() => {\n              params.page = params.page + 1;\n              doGetDelegations();\n            }}>Next page</button\n          >\n        </nav>\n      </div>\n    </div>\n    <div class=\"column\">\n      <div class=\"card p-2\">\n        <div class=\"field\">\n          <label for=\"limit\" class=\"label\">Limit</label>\n          <div class=\"control has-icons-left has-icons-right\">\n            <input\n              id=\"limit\"\n              class=\"input\"\n              type=\"number\"\n              step=\"1\"\n              min=\"1\"\n              max=\"100\"\n              on:change={() => {\n                if (params.limit > 100) {\n                  params.limit = 100;\n                }\n              }}\n              bind:value={params.limit}\n              placeholder=\"Max results per page\"\n            />\n            <span class=\"icon is-small is-left\">\n              <i class=\"fas fa-file\" />\n            </span>\n            <span\n              class=\"icon is-small is-right\"\n              class:is-danger={params.limit > 100}\n            >\n              <i class=\"fas fa-check\" />\n            </span>\n          </div>\n          {#if params.limit > 100}\n            <p class=\"help is-danger\">Max limit is 100</p>\n          {/if}\n        </div>\n\n        <div class=\"field\">\n          <label for=\"page\" class=\"label\">Page</label>\n          <div class=\"control has-icons-left has-icons-right\">\n            <input\n              id=\"page\"\n              bind:value={params.page}\n              class=\"input is-success\"\n              type=\"number\"\n              placeholder=\"Page setting\"\n              step=\"1\"\n              min=\"0\"\n              on:change={() => {\n                if (params.page < 0) {\n                  params.page = 0;\n                }\n              }}\n            />\n            <span class=\"icon is-small is-left\">\n              <i class=\"fas fa-file\" />\n            </span>\n            <span class=\"icon is-small is-right\">\n              <i class=\"fas fa-check\" />\n            </span>\n          </div>\n        </div>\n\n        <div class=\"field\">\n          <label for=\"year\" class=\"label\">Year</label>\n          <div class=\"control is-expanded\">\n            <div class=\"select is-rounded is-fullwidth\">\n              <select id=\"year\" bind:value={params.year}>\n                <option selected value=\"\">Any</option>\n                {#each yearArray as y}\n                  <option value={y}>{y}</option>\n                {/each}\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"field is-grouped\">\n          <div class=\"control\">\n            <button\n              class=\"button is-link\"\n              disabled={loading}\n              on:click={doGetDelegations}\n              class:is-loading={loading}>Submit</button\n            >\n          </div>\n          <div class=\"control\">\n            <button class=\"button is-link is-light\">Cancel</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"],"names":["attr","a","a_href_value","ctx","insert_hydration","target","anchor","dirty","t0_value","t2_value","t4_value","t7_value","if_block","create_if_block_1","base","a1","a1_href_value","tr","append_hydration","th","td0","td1","a0","td2","set_data","t0","t2","t4","t7","p","option","each_value_1","ensure_array_like","i","create_if_block","button0","button0_disabled_value","add_render_callback","select","div18","div1","div17","div4","div3","div2","table","thead","tbody","nav","button1","div16","div15","div6","label0","div5","input0","set_input_value","span1","span2","div8","label1","div7","input1","span3","span4","div11","label2","div10","div9","select_option","div14","div12","button2","div13","to_number","startYear","yearArray","_","params","loading","res","doGetDelegations","bdy","PUBLIC_API_HOST","$$invalidate","err","onMount","select_value"],"mappings":"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"}